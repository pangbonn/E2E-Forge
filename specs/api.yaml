api:
  base: /api
  auth: required

endpoints:

  - name: create_transaction
    method: POST
    path: /transactions
    body:
      type: object
      required: [type, amount, category, occurred_at]
    rules:
      - amount > 0
      - category.type must_match transaction.type

  - name: list_transactions
    method: GET
    path: /transactions
    query:
      - from_date
      - to_date
      - type
      - limit:
          type: integer
          default: 20
          max: 100
          description: Maximum number of transactions to return per page
      - offset:
          type: integer
          default: 0
          description: Number of transactions to skip for pagination
    access: own_only
    returns:
      data: array[Transaction]
      pagination:
        total: integer
        limit: integer
        offset: integer
        has_more: boolean

  - name: summary_by_category
    method: GET
    path: /reports/category
    returns:
      - category
      - total_amount

  - name: delete_transaction
    method: DELETE
    path: /transactions/{id}
    rules:
      - only_admin
